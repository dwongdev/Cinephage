---
# EZTV - Native Cinephage Definition
# Uses the official EZTV JSON API for reliable TV show searching
# Supports IMDB ID lookup for Sonarr integration

id: eztv
name: EZTV
description: EZTV is a public torrent site for TV shows with IMDB lookup support
type: public
protocol: torrent
language: en-US
encoding: UTF-8
requestdelay: 2

links:
  - https://eztvx.to/
  - https://eztv.wf/
  - https://eztv.tf/

legacylinks:
  - https://eztv.re/
  - https://eztv.ag/
  - https://eztv.io/
  - https://eztv.it/
  - https://eztv.ch/

caps:
  modes:
    search: [q]
    tv-search: [q, imdbid, season, ep]

  categorymappings:
    - id: '1'
      cat: TV
      desc: TV Shows
      default: true
    - id: 'tv-hd'
      cat: TV/HD
      desc: TV HD
    - id: 'tv-sd'
      cat: TV/SD
      desc: TV SD

settings:
  - name: limit
    type: select
    label: Results per page
    default: '100'
    options:
      '50': '50'
      '100': '100'

search:
  paths:
    # IMDB search - preferred for Sonarr/Radarr integration
    - path: /api/get-torrents
      method: get
      inputs:
        imdb_id: '{{ .Query.IMDBIDShort }}'
        limit: '{{ .Config.limit }}'

    # Page-based browsing fallback (no keyword search supported by API)
    - path: /api/get-torrents
      method: get
      inputs:
        q: ''
        limit: '{{ .Config.limit }}'
        page: '1'

  allowEmptyInputs: true

  response:
    type: json

  rows:
    selector: torrents

  fields:
    _id:
      selector: id

    category:
      text: '1'

    title:
      selector: title

    details:
      text: '{{ .Config.sitelink }}ep/{{ .Result._id }}'

    magnet:
      selector: magnet_url

    infohash:
      selector: hash

    imdbid:
      selector: imdb_id
      optional: true
      filters:
        - name: prepend
          args: 'tt'

    season:
      selector: season
      optional: true

    episode:
      selector: episode
      optional: true

    date:
      selector: date_released_unix
      filters:
        - name: dateparse
          args: unix

    size:
      selector: size_bytes

    seeders:
      selector: seeds

    leechers:
      selector: peers

    poster:
      selector: small_screenshot
      optional: true
      filters:
        - name: prepend
          args: 'https:'

    downloadvolumefactor:
      text: '0'

    uploadvolumefactor:
      text: '1'
